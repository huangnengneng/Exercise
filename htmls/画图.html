<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
    <canvas id='canvas'></canvas>
	<canvas id="canvas" width="300" height="300"></canvas>
    <!-- <script src="~/Scripts/jquery-3.3.1.js"></script> -->
    <script>
		function getBase64Image(img) {
		          var canvas = document.createElement("canvas");
		          canvas.width = img.width;
		          canvas.height = img.height;
		          var ctx = canvas.getContext("2d");
		          ctx.drawImage(img, 0, 0, img.width, img.height);
		          var dataURL = canvas.toDataURL("image/png");  // 可选其他值 image/jpeg
		          return dataURL;
		      }
		
		      function main(src, cb) {
		          var image = new Image();
		          image.src = src + '?v=' + Math.random(); // 处理缓存
		          image.crossOrigin = "*";  // 支持跨域图片
		          image.onload = function(){
		              var base64 = getBase64Image(image);
		              cb && cb(base64);
		          }
		      }
		
		      main('https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=151472226,3497652000&fm=26&gp=0.jpg', function(base64){
		          console.log(base64);
		      });
		
		
        // var canvas = document.getElementById('canvas');
        // var context = canvas.getContext('2d');//返回一个用于在画布上绘图的环境，当前唯一的合法值是 "2d"，它指定了二维绘图，返回一个 CanvasRenderingContext2D 对象，使用它可以绘制到 Canvas 元素中

        // var url = 'https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1606816124111&di=ce645d16a085899ab911f903c17e2ba1&imgtype=0&src=http%3A%2F%2Fa4.att.hudong.com%2F27%2F67%2F01300000921826141299672233506.jpg';//图片URL
        // var urlNumber = 1;//要渲染的图片数
        // var w = 300;//canvas的宽
        // var h = 300;//canvas的高

        // var img = new Image();
        // img.crossOrigin = 'Anonymous';//解决Canvas.toDataURL 图片跨域问题
        // img.src = url;

        // //渲染方法
        // var imgs = function () {
        //     context.drawImage(img, 0, 0, w, h);
        //     //导出
        //     var base64Img = canvas.toDataURL('image/jpg');
        //     console.log(base64Img);
        // }

        // img.onload = function () {
        //     urlNumber -= 1;
        //     if (urlNumber === 0) {
        //         imgs();
        //     }
        // }
    </script>
</body>
</html>